<!DOCTYPE html>
<html class="antialiased" lang="en">
  <head>



<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta http-equiv="X-UA-Compatible" content="ie=edge"/>
<title>Improve your styled-component props usage - Filoblog</title>
<link rel="canonical" href="https://filoxo.github.io/posts/improve-your-styled-component-props-usage/"/>
<meta property="og:site_name" content="Filoblog"/>
<meta property="og:title" content="Improve your styled-component props usage - Filoblog"/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://filoxo.github.io/posts/improve-your-styled-component-props-usage/"/>


<link rel="icon" href="/favicon.svg" type="image/svg+xml"/>
<link rel="alternate icon" href="/favicon.ico" type="image/png" sizes="48x48"/>
<link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="192x192"/>
<link rel="mask-icon" href="/favicon.svg" color="#4a5568"/>
<meta name="theme-color" content="#4a5568"/>
<!-- https://www.filamentgroup.com/lab/load-css-simpler/ -->


  <script type="module" crossorigin src="/assets/main.2ac814e5.js"></script>
  <link rel="stylesheet" href="/assets/main.094c0f2d.css">
</head>
  <body class="bg-white text-gray-900 dark:bg-gray-900 dark:text-gray-100"><header class="mx-auto mt-2 mb-8 max-w-2xl px-3 md:px-6">
  <nav class="my-0 mx-auto flex max-w-2xl flex-wrap items-center justify-between">
    <h1 class="text-2xl font-semibold tracking-wide">
      <a class="uppercase transition-colors duration-300 ease-in-out hover:text-red-600" href="/">
        Filoblog
      </a>
    </h1>
    
    <ul class="m-0 flex items-center">
      <li>
        <a
          href="https://twitter.com/cfiloteo12"
          rel="noopener noreferrer"
          target="_blank"
          class="inline-flex p-2 transition-colors duration-300 ease-in-out hover:text-red-600">
          <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="24" width="24" xmlns="http://www.w3.org/2000/svg">
            <path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452
              0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568
              130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3
              27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431
              13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365
              109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137
              23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122
              60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path>
          </svg>
          <span class="sr-only">Follow me as @cfiloteo12 on Twitter</span>
        </a>
      </li>
      <li>
        <a
          href="https://github.com/filoxo"
          class="inline-flex p-2 transition-colors duration-300 ease-in-out hover:text-red-600">
          <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 480 512" height="24" width="24" xmlns="http://www.w3.org/2000/svg">
            <path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0
              31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9
              13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10
              27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3
              39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2
              0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4
              150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path>
          </svg>
          <span class="sr-only">I'm @filoxo on Github</span>
        </a>
      </li>
      <li>
        <a
          href="https://www.linkedin.com/in/carlosfiloteo/"
          class="inline-flex p-2 transition-colors duration-300 ease-in-out hover:text-red-600">
          <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="24" width="24" xmlns="http://www.w3.org/2000/svg">
            <path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5
              32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2
              96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9
              27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path>
          </svg>
          <span class="sr-only">Let's connect on LinkedIn</span>
        </a>
      </li>
      <li>
        <div><label class="inline-flex relative items-center cursor-pointer mt-2 ml-2">
  <input type="checkbox" class="sr-only peer" aria-label="Toggle site theme" id="theme-toggle">
    <div class="w-9 h-5 bg-gray-800 rounded-full peer peer-focus:ring-4 peer-focus:ring-red-300 dark:peer-focus:ring-red-800
      dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute
      after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4
      after:transition-all dark:border-gray-600 peer-checked:bg-red-600"></div>
  </label></div>
      </li>
    </ul>
  </nav>
</header><div class="my-0 mx-auto max-w-2xl px-3 md:px-6">
      <div><article class="mb-12">
  <h1 class="mb-4 text-2xl text-red-600">Improve your styled-component props usage</h1>
  <p class="mb-4 text-red-600">30 Nov 2019</p>
  <div class="space-y-6">
    <div class="prose prose-headings:text-2xl prose-headings:font-normal prose-a:text-red-500 prose-code:rounded-sm prose-code:bg-gray-200 prose-code:px-1 prose-code:text-black prose-img:rounded-xl dark:prose-invert">
      <p>I hadn't used styled-components until about a year ago when I started at my current job. I can't say its my favorite CSS-in-JS option for various reasons. One of those reasons is the pitfall of relying on props for styling, which can do a lot more damage than devs may realize.  Take a look at this example:</p>
<pre class="px-4 py-2 rounded-lg overflow-auto not-prose"><code class="language-jsx"><span class="token keyword">const</span> Button <span class="token operator">=</span> styled<span class="token punctuation">.</span>button<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>  background: steelblue;<br><br>  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=></span><br>    <span class="token punctuation">(</span>props<span class="token punctuation">.</span>isDisabled <span class="token operator">||</span> props<span class="token punctuation">.</span>isLoading<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span><br>    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>  background: lightsteelblue;<br>  pointer-events: none;<br></span><span class="token template-punctuation string">`</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> FormInput <span class="token operator">=</span> styled<span class="token punctuation">.</span>input<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>  border: 3px solid dimgray;<br><br>  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=></span> props<span class="token punctuation">.</span>isInvalid <span class="token operator">&amp;&amp;</span> <span class="token string">'border-color: tomato;'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></code></pre>
<p>The problem here is somewhat subtle. Can you spot it?</p>
<h2 id="the-component-props-are-not-providing-semantic-value-to-the-rendered-element"><a class="permalink" href="#the-component-props-are-not-providing-semantic-value-to-the-rendered-element" aria-hidden="true">ðŸ”—</a> The component props are not providing semantic value to the rendered element</h2>
<p>When used like this the props only cause the class name to change. The pure HTML/CSS equivalent would be something like <code>&lt;button class=&quot;button disabled loading&quot;&gt;</code> (though the output classNames from styled components are even less understandable <code>&lt;button class=&quot;sc-aBcDe sc-fGhIj sc-kLmNo&quot;&gt;</code>). This leads to some very interesting gotchas.</p>
<ul>
<li>Setting <code>pointer-events: none</code> through usage of <code>isDisabled</code> seems innocuous but this <em>does not disable the button correctly</em>! Disabled buttons 1) should not receive focus, and 2) should not respond to mouse or keyboard click events; but <code>pointer-events: none</code> only prevents mouse click events. A keyboard user will <strong>still be able to interact with this button</strong>, and a screenreader user will have <strong>no idea that the button is disabled</strong>.</li>
<li>Similarly, the <code>&lt;Button isLoading&gt;</code> and the <code>&lt;FormInput isValid/&gt;</code> does not communicate the state of the control to assitive technology. This leaves those users in the dark as to what is happening when they're interacting with your application.</li>
</ul>
<h2 id="instead-render-semantic-markup-and-use-as-selectors"><a class="permalink" href="#instead-render-semantic-markup-and-use-as-selectors" aria-hidden="true">ðŸ”—</a> Instead, render semantic markup and use as selectors</h2>
<p>For example, <code>isDisabled</code> should instead be renamed to <code>disabled</code> which would then be propagated to the DOM as the <a href="https://www.w3.org/TR/2014/REC-html5-20141028/forms.html#concept-fe-disabled"><code>disabled</code> attribute</a> on the button. The corresponding CSS could then be simplified to use the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:disabled"><code>:disabled</code> CSS pseudoselector</a>.</p>
<p><code>isLoading</code> can instead be used to set the <a href="https://www.w3.org/TR/wai-aria-1.0/states_and_properties#aria-busy"><code>aria-busy</code> role</a>, and <code>isValid</code> used to set the <a href="https://www.w3.org/TR/wai-aria-1.0/states_and_properties#aria-invalid"><code>aria-invalid</code> role</a>; then, use those roles as your selectors in your css!</p>
<pre class="px-4 py-2 rounded-lg overflow-auto not-prose"><code class="language-js"><span class="token keyword">const</span> StyledButton <span class="token operator">=</span> styled<span class="token punctuation">.</span>button<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>  background: steelblue;<br><br>  &amp;:disabled,<br>  &amp;[aria-busy] {<br>    background: lightsteelblue;<br>  }<br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token function-variable function">Button</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> disabled<span class="token punctuation">,</span> isLoading<span class="token punctuation">,</span> <span class="token operator">...</span>props <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>  <span class="token operator">&lt;</span>StyledButton disabled<span class="token operator">=</span><span class="token punctuation">{</span>disabled<span class="token punctuation">}</span> aria<span class="token operator">-</span>busy<span class="token operator">=</span><span class="token punctuation">{</span>isLoading <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> StyledFormInput <span class="token operator">=</span> styled<span class="token punctuation">.</span>input<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>  border: 3px solid dimgray;<br><br>  &amp;[aria-invalid='true'] {<br>    border-color: tomato;<br>  }<br></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token function-variable function">FormInput</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isValid<span class="token punctuation">,</span> <span class="token operator">...</span>props <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>  <span class="token operator">&lt;</span>StyledFormInput aria<span class="token operator">-</span>invalid<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">!</span>isValid<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><br><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The benefits of this new approach are:</p>
<ul>
<li>Accessiblity: the rendered markup and semantics are enhanced for keyboard and screen reader users</li>
<li>Performance: the css would never need to be rerendered</li>
<li>Portable: if in some future we stop using styled-components, we don't need to modify the css to remove props</li>
</ul>
<p>This isn't to say that you should <em>never</em> use props in styles (perhaps the topic of another post), but do think through how your user experience should work and ensure the proper semantics are in place before simply reaching through to props in your styled components.</p>

    </div>
    <footer class="space-y-12">
      <p>Tagged with:&nbsp;<a
            href="/tags/css"
            class="border-b border-current text-red-500 no-underline transition-colors duration-300 ease-in-out visited:border-red-900 hover:text-red-600">css</a>
      ,&nbsp;<a
            href="/tags/javascript"
            class="border-b border-current text-red-500 no-underline transition-colors duration-300 ease-in-out visited:border-red-900 hover:text-red-600">javascript</a>
      </p>
      <div class="flex flex-row-reverse justify-between">
        <a
          class="border-b border-current text-red-500 no-underline transition-colors duration-300 ease-in-out hover:text-red-600"
          href="/">&larr; Back to home</a>
      </div>
    </footer>
  </div>
</article></div>
  </div><hr class="mt-4 mb-2 mx-auto w-48 h-0.5 bg-red-600 rounded border-0"/>
<footer class="my-0 mx-auto flex max-w-2xl flex-wrap items-center justify-between py-6 px-3 md:px-6">
  <p>
    i use this space to jot down ideas and thoughts relating to my work as a software dev, hobbies, and life in general.
    thanks for reading ðŸ¤˜
    <a
      href="/about"
      class="border-b border-current text-red-500 no-underline transition-colors duration-300 ease-in-out hover:text-red-600">
      more about me
    </a>
  </p>
</footer></body></html>