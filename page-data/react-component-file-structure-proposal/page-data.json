{"componentChunkName":"component---src-templates-post-js","path":"/react-component-file-structure-proposal/","result":{"data":{"mdx":{"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"React component file structure proposal\",\n  \"date\": \"2022-08-12T00:00:00.000Z\",\n  \"tags\": [\"react\", \"typescript\", \"testing\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"This is an attempt at a proposal for organizing a React component file structure based on the needs and current patterns at my current place of employment. I'm sharing this first on my blog to get some external feedback, but I also think its a good discussion point in general. For context, our tech stack uses the following: TypeScript, React, Jest, and Storybook. The idea is that this code will be generated as part of a code generator (such as \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://yeoman.io/\"\n  }, \"yeoman\"), \").\"), mdx(\"p\", null, \"In the remainder of this document, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Foo\"), \" will be used to represent the user-supplied name.\"), mdx(\"p\", null, \"The pattern has the following file structure and naming:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"{Foo}/\\n\\u251C\\u2500\\u2500index.tsx\\n\\u251C\\u2500\\u2500use{Foo}Logic.ts\\n\\u251C\\u2500\\u2500use{Foo}Logic.test.tsx\\n\\u251C\\u2500\\u2500{Foo}Component.tsx\\n\\u2514\\u2500\\u2500{Foo}Component.stories.tsx\\n\")), mdx(\"h2\", null, \"Reasoning\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"index.tsx helps make importing simple, eg. \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"import { Foo } from './Foo'\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"'use{Foo}Logic'\"), \" encourages colocating business logic with its unit test (Jest)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"'{Foo}Component'\"), \" encourages colocating UI-related code with its corresponding story (Storybook)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Generating a component as part of developer onboarding experience would be a great primer for how these should work and establish best practices\")), mdx(\"h2\", null, \"File contents\"), mdx(\"p\", null, \"To better illustrate the need for such a pattern, I've filled in the contents of the files below.\"), mdx(\"h3\", null, \"index.tsx\"), mdx(\"p\", null, \"All this file does is export the hooked component, and creates a type for props.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-tsx\"\n  }, \"import { FooComponent } from './FooComponent'\\nimport { useFooLogic } from './useFooLogic'\\n\\n// NOTE: having this into index.ts creates a circular dependency.\\n// I'm unsure whether this is okay given that this is just a Type, which is not included in compiled code...\\n// but makes for a better match for condensed file structure (see below). Alternatively this could be\\n// colocated in use{Foo}Logic file.\\nexport type FooProps = ReturnType<typeof useFooLogic>\\n\\nexport const Foo = withHookHoc(FooComponent, useFooLogic)\\n\")), mdx(\"h3\", null, \"use{Foo}Logic.ts\"), mdx(\"p\", null, \"This file should only contain business logic. Its return value will be passed as props to the component. The extra \\\"Logic\\\" suffix can serve as a constant reminder, but may not actually be necessary as React hooks are intended to be thought of as containing component logic. TBD perhaps.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts\"\n  }, \"import React from 'react'\\n\\nexport const useFooLogic = () => {\\n  return {}\\n}\\n\")), mdx(\"h3\", null, \"use{Foo}Logic.test.ts\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts\"\n  }, \"import React from 'react'\\nimport { renderHook } from '@testing-library/react-hooks'\\nimport { useFooLogic } from './useFooLogic'\\nimport type { FooProps } from '.'\\n\\ndescribe(useFooLogic, () => {\\n  const mockProps: FooProps = {}\\n\\n  const render = (testProps: Partial<FooProps> = {}) => {\\n    return renderHook(useFooLogic, {\\n      initialProps: {\\n        ...mockProps,\\n        ...testProps,\\n      },\\n    })\\n  }\\n\\n  it('returns valid default props', async () => {\\n    const { result } = render()\\n\\n    expect(result.current).toBeDefined() // TODO: have a better default test...\\n  })\\n})\\n\")), mdx(\"p\", null, \"Additional ideas:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"optionally allow generating Apollo MockedProvider code & wrapper\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"optionally allow generating react-router MemoryRouter code & wrapper\")), mdx(\"h3\", null, \"{Foo}Component.tsx\"), mdx(\"p\", null, \"The extra \\\"Component\\\" suffix helps remind the developer that only the component code should be here, though it does look a bit awkward at first glance. Alternative ways to think about this is that this is \\\"headless component\\\" that contains next-to-no logic (though not always avoidable).\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-tsx\"\n  }, \"import React from 'react'\\nimport { withHookHoc } from '@jupiterone/web-apps-core'\\nimport { makeUseStyles } from '@jupiterone/web-juno'\\nimport type { FooProps } from '.'\\n\\nconst useStyles = makeUseStyles((theme) => {\\n  return {}\\n})\\n\\nexport const FooComponent = (props: FooProps) => {\\n  const styles = useStyles()\\n  return <></>\\n}\\n\")), mdx(\"h3\", null, \"{Foo}Component.stories.tsx\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-tsx\"\n  }, \"import React from 'react'\\nimport { storybookTemplate } from '@jupiterone/web-apps-core'\\nimport { FooComponent } from './FooComponent'\\nimport type { FooProps } from '.'\\n\\n// TODO: update storybookTemplate to accept typings\\nconst { template, meta } = storybookTemplate<FooProps>({\\n  title: 'Foo',\\n  component: FooComponent,\\n})\\n\\nexport default meta\\nexport const Default = template({})\\n\")), mdx(\"h2\", null, \"Extra credit: condensed file structure\"), mdx(\"p\", null, \"If, say, you have a very simple component that doesn't need 5 files... just reduce it down to the one index file but retaining the file names for tests.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"{Foo}/\\n\\u251C\\u2500\\u2500index.tsx\\n\\u251C\\u2500\\u2500use{Foo}Logic.test.tsx\\n\\u2514\\u2500\\u2500{Foo}Component.stories.tsx\\n\")), mdx(\"h3\", null, \"index.tsx\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-tsx\"\n  }, \"import React from 'react'\\nimport React from 'react'\\nimport { withHookHoc } from '@jupiterone/web-apps-core'\\nimport { makeUseStyles } from '@jupiterone/web-juno'\\n\\n/* --- Logic --- */\\nexport const useFooLogic = () => {\\n  return {}\\n}\\n\\nexport type FooProps = ReturnType<typeof useFooLogic>\\n\\n/* --- Component --- */\\nconst useStyles = makeUseStyles((theme) => {\\n  return {}\\n})\\n\\nexport const FooComponent = (props: FooProps) => {\\n  const styles = useStyles()\\n  return <></>\\n}\\n\\nexport const Foo = withHookHoc(FooComponent, useFooLogic)\\n\")), mdx(\"h3\", null, \"use{Foo}Logic.test.ts\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-ts\"\n  }, \"import React from 'react'\\nimport { renderHook } from '@testing-library/react-hooks'\\nimport { useFooLogic } from '.'\\nimport type { FooProps } from '.'\\n\\ndescribe(useFooLogic, () => {\\n  const mockProps: FooProps = {}\\n\\n  const render = (testProps: Partial<FooProps> = {}) => {\\n    return renderHook(useFooLogic, {\\n      initialProps: {\\n        ...mockProps,\\n        ...testProps,\\n      },\\n    })\\n  }\\n\\n  it('returns valid default props', async () => {\\n    const { result } = render()\\n\\n    expect(result.current).toBeDefined()\\n  })\\n})\\n\")), mdx(\"h3\", null, \"{Foo}Component.stories.tsx\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-tsx\"\n  }, \"import React from 'react'\\nimport { storybookTemplate } from '@jupiterone/web-apps-core'\\nimport { FooComponent } from '.'\\nimport type { FooProps } from '.'\\n\\n// TODO: update storybookTemplate to accept typings\\nconst { template, meta } = storybookTemplate<FooProps>({\\n  title: 'Foo',\\n  component: FooComponent,\\n})\\n\\nexport default meta\\nexport const Default = template({})\\n\")), mdx(\"p\", null, \"What do you think? Would you use a codebase structured like this?\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"React component file structure proposal","date":"12 Aug 22","tags":["react","typescript","testing"]}}},"pageContext":{"slug":"/react-component-file-structure-proposal/"}},"staticQueryHashes":["3649515864"]}