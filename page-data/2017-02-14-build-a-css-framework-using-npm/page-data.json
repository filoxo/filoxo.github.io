{"componentChunkName":"component---src-templates-post-js","path":"/2017-02-14-build-a-css-framework-using-npm/","webpackCompilationHash":"c5cb863b0fbbf179c901","result":{"data":{"mdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Building a CSS framework using npm\",\n  \"date\": \"2017-02-14T00:00:00.000Z\",\n  \"tags\": [\"javascript\", \"npm\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"590px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/add274474afb2aa4bd26d33be9de68c4/c35de/leaves.jpg\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": [\"noopener\"]\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"25%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAFABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBP/EABUBAQEAAAAAAAAAAAAAAAAAAAME/9oADAMBAAIQAxAAAAG6IFGsKP8A/8QAGBAAAwEBAAAAAAAAAAAAAAAAAQIDEjP/2gAIAQEAAQUCDHdGYCfP/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEDMf/aAAgBAwEBPwGaHp//xAAVEQEBAAAAAAAAAAAAAAAAAAAQQv/aAAgBAgEBPwGj/8QAGBABAAMBAAAAAAAAAAAAAAAAAAECETH/2gAIAQEABj8Cl1XX/8QAFxABAQEBAAAAAAAAAAAAAAAAAQARIf/aAAgBAQABPyEB3AOastcv/9oADAMBAAIAAwAAABB8H//EABgRAQEAAwAAAAAAAAAAAAAAAAEAITFx/9oACAEDAQE/EATJbu3/xAAVEQEBAAAAAAAAAAAAAAAAAAAQUf/aAAgBAgEBPxCD/8QAGhABAAMAAwAAAAAAAAAAAAAAAQARIUFRYf/aAAgBAQABPxC0WDR5hBdR7JegNrzP/9k=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Leaves\",\n    \"title\": \"Leaves\",\n    \"src\": \"/static/add274474afb2aa4bd26d33be9de68c4/c739e/leaves.jpg\",\n    \"srcSet\": [\"/static/add274474afb2aa4bd26d33be9de68c4/8ee9c/leaves.jpg 148w\", \"/static/add274474afb2aa4bd26d33be9de68c4/ebbe7/leaves.jpg 295w\", \"/static/add274474afb2aa4bd26d33be9de68c4/c739e/leaves.jpg 590w\", \"/static/add274474afb2aa4bd26d33be9de68c4/5413e/leaves.jpg 885w\", \"/static/add274474afb2aa4bd26d33be9de68c4/4efde/leaves.jpg 1180w\", \"/static/add274474afb2aa4bd26d33be9de68c4/c35de/leaves.jpg 1200w\"],\n    \"sizes\": \"(max-width: 590px) 100vw, 590px\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"This last weekend I wanted to create a simple CSS framework that I can reuse for my own little projects. The end result is \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/filoxo/simple-style\"\n  }), \"Simple Style\"), \" (which is still a WIP as requirements come up). Surprisingly, using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://medium.com/@dabit3/introduction-to-using-npm-as-a-build-tool-b41076f488b0#.5w4loc8uy\"\n  }), \"npm as a build tool\"), \" made it extremely easy to set up a dev environment. I'll review everything about the setup in this post for my own documentation, but hopefully can also serve as a clean, straightforward example.\"), mdx(\"p\", null, \"I used \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://yarnpkg.com/en/\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"yarn\")), \" for this experiment instead of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm\"), \" solely for the speed improvements. Fortunately, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"yarn\"), \"'s commands all have their \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm\"), \" equivalents so don't get hung up on the differences.\"), mdx(\"p\", null, \"This basic setup offers:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Autoprefixing to support the 2 latest browsers\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Future CSS syntax usable today\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"minification\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"optimizations\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"a quick and easy development setup to reflect changes on-the-fly\")), mdx(\"h3\", null, \"Dev dependencies\"), mdx(\"p\", null, \"Here are our initial development dependencies:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://necolas.github.io/normalize.css/\"\n  }), \"normalize.css\"), \": so that all elements render consistently\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/postcss/postcss\"\n  }), \"PostCSS\"), \"'s CLI: to leverage its ecosystem of feature plugins\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://cssnext.io/\"\n  }), \"CSSnext\"), \": a PostCSS plugin that helps you to use the latest CSS syntax today. This way the code will be a little more future-proof. Additionally, CSSnext also includes \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/postcss/autoprefixer\"\n  }), \"Autoprefixer\"), \" as a dependency.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"postcss-import\"), \": used to pull in a css file that wasn't being preprocessed\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"cssnano\"), \": minify and optimize output\")), mdx(\"p\", null, \"Install using yarn (or the npm equivalent)\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"yarn add -D normalize.css postcss-cli postcss-cssnext postcss-import cssnano\\n\")), mdx(\"h3\", null, \"PostCSS config\"), mdx(\"p\", null, \"Create a json file that contains the config for PostCSS. The docs named it \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"options.json\"), \" but I choose \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"postcss.json\"), \" for better clarity. The comments below explain some keys.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"{\\n    // Enable plugins in order\\n    \\\"use\\\": [\\n        \\\"postcss-import\\\",\\n        \\\"postcss-cssnext\\\",\\n        \\\"cssnano\\\"\\n    ],\\n    \\\"input\\\": \\\"main.css\\\",\\n    \\\"output\\\": \\\"dist/main.css\\\",\\n    // use locally installed plugins (eg. in node_modules)\\n    \\\"local-plugins\\\": true,\\n    // Enable sourcemaps\\n    \\\"map\\\": true,\\n    // CSSnext and cssnano both use autoprefixer, but for different features/purposes\\n    // see https://github.com/MoOx/postcss-cssnext/issues/323\\n    \\\"postcss-cssnext\\\": {\\n        \\\"warnForDuplicates\\\": false\\n    }\\n}\\n\")), mdx(\"h3\", null, \"CSS time\"), mdx(\"p\", null, \"Go ahead and create \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"main.css\"), \" at the project root. The above config will output to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"dist/\"), \". Here's a quick sample to put into the file for now.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"@import('normalize.css');\\n\\n:root {\\n    --color-primary: blue;\\n    --color-secondary: red;\\n}\\n\")), mdx(\"h3\", null, \"Building\"), mdx(\"p\", null, \"Use the postcss-cli with the config file passed in as an arg and save it as an npm script.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"\\\"scripts\\\": {\\n    \\\"build\\\": \\\"node_modules/postcss-cli/bin/postcss -c postcss.json\\\"\\n}\\n\")), mdx(\"p\", null, \"Now you can simply run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"yarn run build\"), \" and your css will be processed and output to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"dist\"), \". But we can still do better.\"), mdx(\"h3\", null, \"Watch for changes\"), mdx(\"p\", null, \"Enabling watch will auto-transform the css file on changes. Add another npm script, which is exactly the same as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"build\"), \" but with the watch flag.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"\\\"build:dev\\\": \\\"node_modules/postcss-cli/bin/postcss -c postcss.json -w\\\"\\n\")), mdx(\"h3\", null, \"Livereload\"), mdx(\"p\", null, \"You wouldn't develop a CSS framework without seeing it rendered on a page so let's create a test page for development. Create \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"index.html\"), \" at the project root and populate it with some HTML, and add a link to your \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"main.css\"), \" file.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"<!doctype html>\\n<html lang=\\\"en-US\\\">\\n    <head>\\n        <link rel=\\\"stylesheet\\\" href=\\\"/dist/main.css\\\">\\n    </head>\\n    <body>\\n        <main>Hello world</main>\\n    </body>\\n</html>\\n\")), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/lr-http-server\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"lr-http-server\")), \" will reload on changes, as well as a functioning http server.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"yarn add -D lr-http-server\\n\")), mdx(\"p\", null, \"And then register a new npm script for it\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"\\\"reload\\\": \\\"lr-http-server -p 3000\\\"\\n\")), mdx(\"h3\", null, \"Composing scripts\"), mdx(\"p\", null, \"We want the two above scripts to run in parallel so that if either the css or the html file changes the livereload server will do its job. \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/npm-run-all\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"npm-run-all\")), \" with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"-p\"), \" (parallel) flag does this exactly.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"yarn add -D npm-run-all\\n\")), mdx(\"p\", null, \"Join the two tasks together into a single npm script\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"\\\"start\\\": \\\"npm-run-all -p build:dev reload\\\"\\n\")), mdx(\"p\", null, \"And then run easily with\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"yarn start\\n\")), mdx(\"h3\", null, \"Done!\"), mdx(\"p\", null, \"You're ready to keep going developing your styles inside \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"main.css\"), \". Feel free to improve upon this as needed!\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Building a CSS framework using npm","date":"Feb 14, 2017","tags":["javascript","npm"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2017-02-14-build-a-css-framework-using-npm/"}}}