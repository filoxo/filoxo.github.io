{"componentChunkName":"component---src-templates-post-js","path":"/improve-your-styled-component-props-usage/","result":{"data":{"mdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Improve your styled-component props usage\",\n  \"date\": \"2019-11-30T00:00:00.000Z\",\n  \"tags\": [\"css\", \"javascript\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"I hadn't used styled-components until about a year ago when I started at my current job. I can't say its my favorite CSS-in-JS option for various reasons. One of those reasons is the pitfall of relying on props for styling, which can do a lot more damage than devs may realize. Take a look at this example:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const Button = styled.button`\\nbackground: steelblue;\\n\\n${props => (props.isDisabled || props.isLoading) \\n  && `\\n  background: lightsteelblue;\\n  pointer-events: none;\\n`}\\n`;\\n\\nconst FormInput = styled.input`\\nborder: 3px solid dimgray;\\n\\n${props => props.isInvalid \\n  && 'border-color: tomato;'\\n}\\n`;\\n\")), mdx(\"p\", null, \"The problem here is somewhat subtle. Can you spot it?\"), mdx(\"h2\", null, \"The component props are not providing semantic value to the rendered element\"), mdx(\"p\", null, \"When used like this the props only cause the class name to change. The pure HTML/CSS equivalent would be something like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<button class=\\\"button disabled loading\\\">\"), \" (though the output classNames from styled components are even less understandable \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<button class=\\\"sc-aBcDe sc-fGhIj sc-kLmNo\\\">\"), \"). This leads to some very interesting gotchas. \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Setting \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pointer-events: none\"), \" through usage of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"isDisabled\"), \" seems innocuous but this \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"does not disable the button correctly\"), \"! Disabled buttons 1) should not receive focus, and 2) should not respond to mouse or keyboard click events; but \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pointer-events: none\"), \" only prevents mouse click events. A keyboard user will \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"still be able to interact with this button\"), \", and a screenreader user will have \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"no idea that the button is disabled\"), \".\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Similarly, the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<Button isLoading>\"), \" and the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<FormInput isValid/>\"), \" does not communicate the state of the control to assitive technology. This leaves those users in the dark as to what is happening when they're interacting with your application.\"))), mdx(\"h2\", null, \"Instead, render semantic markup and use as selectors\"), mdx(\"p\", null, \"For example, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"isDisabled\"), \" should instead be renamed to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"disabled\"), \" which would then be propagated to the DOM as the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.w3.org/TR/2014/REC-html5-20141028/forms.html#concept-fe-disabled\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"disabled\"), \" attribute\"), \" on the button. The corresponding CSS could then be simplified to use the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/CSS/:disabled\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \":disabled\"), \" CSS pseudoselector\"), \". \"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"isLoading\"), \" can instead be used to set the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.w3.org/TR/wai-aria-1.0/states_and_properties#aria-busy\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"aria-busy\"), \" role\"), \", and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"isValid\"), \" used to set the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.w3.org/TR/wai-aria-1.0/states_and_properties#aria-invalid\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"aria-invalid\"), \" role\"), \"; then, use those roles as your selectors in your css!\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const StyledButton = styled.button`\\nbackground: steelblue;\\n\\n&:disabled, \\n&[aria-busy] {\\n  background: lightsteelblue;\\n}\\n`;\\n\\nconst Button = ({disabled, isLoading, ...props}) => \\n  <StyledButton disabled={disabled} aria-busy={isLoading || null} {...props} />\\n\\nconst StyledFormInput = styled.input`\\nborder: 3px solid dimgray;\\n\\n&[aria-invalid=\\\"true\\\"] {\\n  border-color: tomato;\\n}\\n`;\\n\\nconst FormInput = ({isValid, ...props}) => \\n  <StyledFormInput aria-invalid={!isValid} {...props} />\\n\")), mdx(\"p\", null, \"The benefits of this new approach are:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Accessiblity: the rendered markup and semantics are enhanced for keyboard and screen reader users\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Performance: the css would never need to be rerendered\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Portable: if in some future we stop using styled-components, we don't need to modify the css to remove props\")), mdx(\"p\", null, \"This isn't to say that you should \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"never\"), \" use props in styles (perhaps the topic of another post), but do think through how your user experience should work and ensure the proper semantics are in place before simply reaching through to props in your styled components.\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Improve your styled-component props usage","date":"Nov 30, 2019","tags":["css","javascript"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/improve-your-styled-component-props-usage/"}}}